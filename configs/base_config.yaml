# Base Configuration for Dealer Scrapers
# This file contains default patterns that work across most dealer locator websites

selectors:
  # Common patterns for search input fields
  search_input:
    - "input[placeholder*='Zip']"
    - "input[placeholder*='zip']"
    - "input[placeholder*='City']"
    - "input[placeholder*='city']"
    - "input[placeholder*='Location']"
    - "input[placeholder*='location']"
    - "input[aria-label*='Zip']"
    - "input[aria-label*='zip']"
    - "input[aria-label*='City']"
    - "input[aria-label*='city']"
    - "input[type='search']"
    - "input[name*='zip']"
    - "input[name*='city']"
    - "input[id*='zip']"
    - "input[id*='city']"
    - "input[class*='zip']"
    - "input[class*='search']"

  # Patterns for search/submit buttons
  search_button:
    - "button[type='submit']"
    - "button:has-text('Search')"
    - "button:has-text('Find')"
    - "button:has-text('Go')"
    - "input[type='submit']"
    - "[aria-label*='Search']"

  # Common patterns for dealer card/list items
  dealer_cards:
    - "li[class*='dealer']"
    - "li[class*='Dealer']"
    - "div[class*='dealer-card']"
    - "div[class*='dealerCard']"
    - "div[class*='dealer_item']"
    - "div[class*='dealer-item']"
    - "div[class*='result-item']"
    - "div[class*='resultItem']"
    - "article[class*='dealer']"
    - "article[class*='result']"
    - "div[data-dealer-id]"
    - "div[data-dealer]"
    - "[class*='dealer-listing']"
    - "[class*='dealerListing']"

  # Patterns for "Apply" or "Search" buttons on filter pages
  apply_button:
    - "button:has-text('Apply')"
    - "button:has-text('Filter')"
    - "button:has-text('Show Results')"
    - "button[type='submit']"
    - "input[type='submit'][value*='Apply']"

  # Patterns for "View More" / "Load More" buttons
  view_more_button:
    - "button:has-text('View More')"
    - "button:has-text('Load More')"
    - "button:has-text('Show More')"
    - "button:has-text('See More')"
    - "a:has-text('View More')"
    - "a:has-text('Load More')"
    - "[class*='view-more']"
    - "[class*='load-more']"

  # Patterns for scroll containers
  scroll_container:
    - "div[class*='results']"
    - "div[class*='list']"
    - "div[class*='container']"
    - "[class*='scroll']"
    - "[class*='dealer-list']"

# Data field selectors within dealer cards
data_fields:
  name:
    selector: null
    type: text
    fallback_patterns:
      - "h2"
      - "h3"
      - "h4"
      - "[class*='name']"
      - "[class*='title']"
  address:
    selector: null
    type: text
    fallback_patterns:
      - "[class*='address']"
      - "[class*='location']"
      - "[class*='addr']"
  phone:
    selector: null
    type: href
    attribute: href
    fallback_patterns:
      - "a[href^='tel:']"
      - "[class*='phone']"
      - "[class*='tel']"
  website:
    selector: null
    type: href
    attribute: href
    fallback_patterns:
      - "a[href^='http']"
      - "[class*='website']"
      - "[class*='site']"

interactions:
  # Search behavior
  search_sequence:
    - fill_input
    - press_enter
  pagination_type: view_more  # Options: view_more, scroll, pagination, none
  
  # Default wait times (in seconds)
  wait_after_page_load: 3
  wait_after_search: 4
  wait_after_apply: 3
  scroll_delay: 0.5
  view_more_delay: 2
  click_delay: 0.3
  max_scroll_iterations: 30
  max_no_new_count: 3

# Input fields configuration
input_fields:
  zip_code:
    selector: null  # Use search_input selectors
    type: text
    required: true
  radius:
    selector: null
    type: select
    required: false
    default_value: "50"

extraction:
  # Phone number patterns (regex)
  phone_patterns:
    - "\\(?\\d{3}\\)?[-.\\s]?\\d{3}[-.\\s]?\\d{4}"
    - "\\d{3}[-.\\s]?\\d{3}[-.\\s]?\\d{4}"
    - "\\+?1[-.\\s]?\\(?\\d{3}\\)?[-.\\s]?\\d{3}[-.\\s]?\\d{4}"

  # Name extraction patterns
  name_patterns:
    - "^\\d+\\.\\s*(.+)"  # "1. Dealer Name"
    - "^(.+?)\\s*\\|"  # "Name | Address"
    - "^(.+?)\\s*$"  # Just the name

  # Address patterns
  address_patterns:
    - ".+?,\\s*[A-Za-z\\s]+,\\s*[A-Z]{2}\\s+\\d{5}"
    - ".+?\\s+[A-Z]{2}\\s+\\d{5}"

  # Distance patterns
  distance_patterns:
    - "([\\d.]+)\\s*mi\\b"
    - "([\\d.]+)\\s*miles?\\b"

  # Website extraction - domains to skip
  skip_domains:
    - "maps.google.com"
    - "google.com"
    - "tel:"
    - "mailto:"
